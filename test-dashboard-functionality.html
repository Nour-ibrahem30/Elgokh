<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #0f172a;
            color: #f1f5f9;
            padding: 2rem;
            direction: rtl;
        }
        .test-result {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            border: 2px solid;
        }
        .success {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
            color: #10b981;
        }
        .error {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            color: #ef4444;
        }
        .info {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
            color: #3b82f6;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
    <div id="test-results"></div>

    <script>
        const results = [];
        
        function addResult(message, type = 'info') {
            results.push({ message, type });
            updateDisplay();
        }
        
        function updateDisplay() {
            const container = document.getElementById('test-results');
            container.innerHTML = results.map(result => 
                `<div class="test-result ${result.type}">${result.message}</div>`
            ).join('');
        }
        
        // Test localStorage functionality
        function testLocalStorage() {
            try {
                // Test saving data
                const testData = [
                    { id: 1, title: 'Test Note', content: 'Test content', category: 'general' }
                ];
                localStorage.setItem('test-notes', JSON.stringify(testData));
                
                // Test loading data
                const loaded = JSON.parse(localStorage.getItem('test-notes') || '[]');
                
                if (loaded.length === 1 && loaded[0].title === 'Test Note') {
                    addResult('âœ… LocalStorage ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'success');
                } else {
                    addResult('âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ LocalStorage', 'error');
                }
                
                // Clean up
                localStorage.removeItem('test-notes');
            } catch (error) {
                addResult('âŒ Ø®Ø·Ø£ ÙÙŠ LocalStorage: ' + error.message, 'error');
            }
        }
        
        // Test if dashboard page exists and is accessible
        function testDashboardAccess() {
            fetch('/pages/dashboard.html')
                .then(response => {
                    if (response.ok) {
                        addResult('âœ… ØµÙØ­Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…ØªØ§Ø­Ø©', 'success');
                        return response.text();
                    } else {
                        addResult('âŒ ØµÙØ­Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ØºÙŠØ± Ù…ØªØ§Ø­Ø©', 'error');
                    }
                })
                .then(html => {
                    if (html) {
                        // Check for key elements
                        const hasAddButtons = html.includes('addTestimonialBtn') && 
                                            html.includes('addNoteBtn') && 
                                            html.includes('addMaterialBtn');
                        
                        if (hasAddButtons) {
                            addResult('âœ… Ø¬Ù…ÙŠØ¹ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¬ÙˆØ¯Ø©', 'success');
                        } else {
                            addResult('âŒ Ø¨Ø¹Ø¶ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…ÙÙ‚ÙˆØ¯Ø©', 'error');
                        }
                        
                        // Check for JavaScript functionality
                        const hasEventListeners = html.includes('addEventListener') && 
                                                html.includes('createModal');
                        
                        if (hasEventListeners) {
                            addResult('âœ… ÙˆØ¸Ø§Ø¦Ù JavaScript Ù…ÙˆØ¬ÙˆØ¯Ø©', 'success');
                        } else {
                            addResult('âŒ ÙˆØ¸Ø§Ø¦Ù JavaScript Ù…ÙÙ‚ÙˆØ¯Ø©', 'error');
                        }
                        
                        // Check for Three.js integration
                        const hasThreeJS = html.includes('THREE.Scene') && 
                                         html.includes('three-canvas');
                        
                        if (hasThreeJS) {
                            addResult('âœ… ØªÙƒØ§Ù…Ù„ Three.js Ù…ÙˆØ¬ÙˆØ¯', 'success');
                        } else {
                            addResult('âŒ ØªÙƒØ§Ù…Ù„ Three.js Ù…ÙÙ‚ÙˆØ¯', 'error');
                        }
                    }
                })
                .catch(error => {
                    addResult('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙØ­Ø©: ' + error.message, 'error');
                });
        }
        
        // Test authentication simulation
        function testAuthSimulation() {
            // Simulate teacher login
            localStorage.setItem('currentUserEmail', 'mohamednaser@gmail.com');
            localStorage.setItem('userRole', 'teacher');
            localStorage.setItem('currentUser', JSON.stringify({
                name: 'Ù…Ø­Ù…Ø¯ Ù†Ø§ØµØ±',
                email: 'mohamednaser@gmail.com',
                role: 'teacher'
            }));
            
            addResult('âœ… ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³', 'success');
            addResult('ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: mohamednaser@gmail.com', 'info');
            addResult('ğŸ‘¤ Ø§Ù„Ø¯ÙˆØ±: teacher', 'info');
        }
        
        // Run all tests
        addResult('ğŸš€ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…...', 'info');
        
        testLocalStorage();
        testAuthSimulation();
        testDashboardAccess();
        
        addResult('âœ¨ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', 'success');
        addResult('ğŸ”— <a href="/pages/dashboard.html" style="color: #3b82f6;">Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>', 'info');
    </script>
</body>
</html>