# ๐ฅ ูููู ุงูุจูุงูุงุช ูู Firebase Firestore

## ๐ Collections ุงููุณุชุฎุฏูุฉ

### 1. Collection: `exams`

ูุฐุง ุงูู Collection ูุญุชูู ุนูู ุฌููุน ุงูุงูุชุญุงูุงุช (ุงููุฏูุฌุฉ ูุงูุฎุงุฑุฌูุฉ)

---

## ๐ ุงูุชุญุงู ุฎุงุฑุฌู (External Exam)

```javascript
{
  // ูุนุฑู ุชููุงุฆู ูู Firebase
  id: "exam123abc",
  
  // ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
  title: "ุงูุชุญุงู ุงูููุณูุฉ - ุงููุญุฏุฉ ุงูุฃููู",
  duration: 60, // ุจุงูุฏูุงุฆู
  description: "ุงูุชุญุงู ุดุงูู ุนูู ุงููุญุฏุฉ ุงูุฃููู",
  
  // ููุน ุงูุงูุชุญุงู
  examType: "external",
  
  // ุฑุงุจุท ุงูุงูุชุญุงู ุงูุฎุงุฑุฌู (Google Forms ูุซูุงู)
  examUrl: "https://forms.google.com/d/e/1FAIpQLSc...",
  
  // ุชุงุฑูุฎ ุงูุฅูุดุงุก
  createdAt: "2024-01-15T10:30:00.000Z"
}
```

---

## ๐ ุงูุชุญุงู ูุฏูุฌ (Internal Exam)

```javascript
{
  // ูุนุฑู ุชููุงุฆู ูู Firebase
  id: "exam456def",
  
  // ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
  title: "ุงูุชุญุงู ุงูููุณูุฉ - ุงููุญุฏุฉ ุงูุซุงููุฉ",
  duration: 45, // ุจุงูุฏูุงุฆู
  description: "ุงูุชุญุงู ูุฏูุฌ ูุญุชูู ุนูู ุฃุณุฆูุฉ ุตุญ/ุฎุทุฃ ูุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ",
  
  // ููุน ุงูุงูุชุญุงู
  examType: "internal",
  
  // ูุตูููุฉ ุงูุฃุณุฆูุฉ
  questions: [
    // ุณุคุงู ุตุญ ุฃู ุฎุทุฃ
    {
      question: "ุงูููุณูุฉ ูู ุนูู ุฏุฑุงุณุฉ ุงูุญููุฉ ูุงููุนุฑูุฉ",
      type: "true-false",
      options: ["ุตุญ", "ุฎุทุฃ"],
      correctAnswer: 0, // ุฑูู ุงูุฎูุงุฑ ุงูุตุญูุญ (0 = ุตุญุ 1 = ุฎุทุฃ)
      explanation: "ุงูููุณูุฉ ุชุนูู ุญุจ ุงูุญููุฉ ูุชูุชู ุจุฏุฑุงุณุฉ ุงููุนุฑูุฉ ูุงููุฌูุฏ"
    },
    
    // ุณุคุงู ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ
    {
      question: "ูู ูู ุฃุจู ุงูููุณูุฉ ุงููููุงููุฉุ",
      type: "mcq",
      options: [
        "ุฃุฑุณุทู",
        "ุณูุฑุงุท",
        "ุฃููุงุทูู",
        "ุฏููุงุฑุช"
      ],
      correctAnswer: 1, // ุฑูู ุงูุฎูุงุฑ ุงูุตุญูุญ (1 = ุณูุฑุงุท)
      explanation: "ุณูุฑุงุท ูุนุชุจุฑ ุฃุจู ุงูููุณูุฉ ุงููููุงููุฉ ููุนูู ุฃููุงุทูู"
    },
    
    // ุณุคุงู ุขุฎุฑ ุตุญ ุฃู ุฎุทุฃ
    {
      question: "ุฏููุงุฑุช ูู ูููุณูู ูุฑูุณู",
      type: "true-false",
      options: ["ุตุญ", "ุฎุทุฃ"],
      correctAnswer: 0,
      explanation: "ุฑูููู ุฏููุงุฑุช (1596-1650) ูููุณูู ูุนุงูู ุฑูุงุถูุงุช ูุฑูุณู"
    },
    
    // ุณุคุงู ุขุฎุฑ ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ
    {
      question: "ูุง ูู ุงูููุณูุฉ ุงูุชู ุชูุชู ุจุฏุฑุงุณุฉ ุงูุฃุฎูุงูุ",
      type: "mcq",
      options: [
        "ุงูููุชุงููุฒููุง",
        "ุงูุฅุจุณุชููููุฌูุง",
        "ุงูุฃุฎูุงููุงุช",
        "ุงูููุทู"
      ],
      correctAnswer: 2,
      explanation: "ุงูุฃุฎูุงููุงุช (Ethics) ูู ูุฑุน ุงูููุณูุฉ ุงูุฐู ูุฏุฑุณ ุงูุฃุฎูุงู ูุงูููู"
    }
  ],
  
  // ุชุงุฑูุฎ ุงูุฅูุดุงุก
  createdAt: "2024-01-15T11:00:00.000Z"
}
```

---

## ๐ ุดุฑุญ ุงูุญููู

### ุญููู ูุดุชุฑูุฉ (ูุฌููุน ุงูุงูุชุญุงูุงุช):
| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| `id` | string | ูุนุฑู ูุฑูุฏ ุชููุงุฆู ูู Firebase |
| `title` | string | ุนููุงู ุงูุงูุชุญุงู |
| `duration` | number | ูุฏุฉ ุงูุงูุชุญุงู ุจุงูุฏูุงุฆู |
| `description` | string | ูุตู ุงูุงูุชุญุงู (ุงุฎุชูุงุฑู) |
| `examType` | string | ููุน ุงูุงูุชุญุงู: "external" ุฃู "internal" |
| `createdAt` | string | ุชุงุฑูุฎ ุงูุฅูุดุงุก ุจุตูุบุฉ ISO |

### ุญููู ุฎุงุตุฉ ุจุงูุงูุชุญุงู ุงูุฎุงุฑุฌู:
| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| `examUrl` | string | ุฑุงุจุท ุงูุงูุชุญุงู ุงูุฎุงุฑุฌู |

### ุญููู ุฎุงุตุฉ ุจุงูุงูุชุญุงู ุงููุฏูุฌ:
| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| `questions` | array | ูุตูููุฉ ุงูุฃุณุฆูุฉ |

### ุญููู ุงูุณุคุงู (ุฏุงุฎู questions):
| ุงูุญูู | ุงูููุน | ุงููุตู |
|------|------|-------|
| `question` | string | ูุต ุงูุณุคุงู |
| `type` | string | ููุน ุงูุณุคุงู: "true-false" ุฃู "mcq" |
| `options` | array | ูุตูููุฉ ุงูุฎูุงุฑุงุช (2 ููุตุญ/ุฎุทุฃุ 4 ููุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ) |
| `correctAnswer` | number | ุฑูู ุงูุฎูุงุฑ ุงูุตุญูุญ (ูุจุฏุฃ ูู 0) |
| `explanation` | string | ุดุฑุญ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ (ุงุฎุชูุงุฑู) |

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุนูุงูุงุช

### 1. ุฌูุจ ุฌููุน ุงูุงูุชุญุงูุงุช
```javascript
const examsSnapshot = await getDocs(collection(db, 'exams'));
const exams = examsSnapshot.docs.map(doc => ({
  id: doc.id,
  ...doc.data()
}));
```

### 2. ุฌูุจ ุงูุชุญุงู ูุญุฏุฏ
```javascript
const examDoc = await getDoc(doc(db, 'exams', examId));
const examData = {
  id: examDoc.id,
  ...examDoc.data()
};
```

### 3. ุฅุถุงูุฉ ุงูุชุญุงู ุฌุฏูุฏ
```javascript
const newExam = {
  title: "ุงูุชุญุงู ุฌุฏูุฏ",
  duration: 60,
  description: "ูุตู ุงูุงูุชุญุงู",
  examType: "internal",
  questions: [...],
  createdAt: new Date().toISOString()
};

const docRef = await addDoc(collection(db, 'exams'), newExam);
console.log('Exam ID:', docRef.id);
```

### 4. ุญุฐู ุงูุชุญุงู
```javascript
await deleteDoc(doc(db, 'exams', examId));
```

### 5. ุชุตููุฉ ุงูุงูุชุญุงูุงุช ุงููุฏูุฌุฉ ููุท
```javascript
const internalExams = exams.filter(exam => 
  exam.examType === 'internal' && 
  exam.questions && 
  exam.questions.length > 0
);
```

### 6. ุชุตููุฉ ุงูุงูุชุญุงูุงุช ุงูุฎุงุฑุฌูุฉ ููุท
```javascript
const externalExams = exams.filter(exam => 
  exam.examType === 'external' && 
  exam.examUrl
);
```

---

## ๐ฏ ููุงุญุธุงุช ูููุฉ

### 1. ุฃุฑูุงู ุงูุฎูุงุฑุงุช (correctAnswer)
- ุชุจุฏุฃ ูู 0 (ูููุณ 1)
- ููุตุญ/ุฎุทุฃ: 0 = ุตุญุ 1 = ุฎุทุฃ
- ููุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ: 0 = ุงูุฎูุงุฑ ุงูุฃููุ 1 = ุงูุซุงููุ ุฅูุฎ

### 2. ุฃููุงุน ุงูุฃุณุฆูุฉ
- `"true-false"`: ุณุคุงู ุตุญ ุฃู ุฎุทุฃ (ุฎูุงุฑูู ููุท)
- `"mcq"`: ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ (4 ุฎูุงุฑุงุช)

### 3. ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ
- `description`: ูููู ุฃู ูููู ูุงุฑุบุงู
- `explanation`: ูููู ุฃู ูููู ูุงุฑุบุงู ูู ุงูุฃุณุฆูุฉ

### 4. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
ูุจู ุงูุญูุธุ ุชุฃูุฏ ูู:
- ูุฌูุฏ ุนููุงู ููุฏุฉ
- ููุงูุชุญุงู ุงูุฎุงุฑุฌู: ูุฌูุฏ ุฑุงุจุท
- ููุงูุชุญุงู ุงููุฏูุฌ: ูุฌูุฏ ุณุคุงู ูุงุญุฏ ุนูู ุงูุฃูู
- ููู ุณุคุงู: ูุต ุงูุณุคุงูุ ุงูุฎูุงุฑุงุชุ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ

---

## ๐ ููุงุนุฏ ุงูุฃูุงู (Firestore Rules)

ูุฌุจ ุงูุชุฃูุฏ ูู ุฃู ููุงุนุฏ Firestore ุชุณูุญ ุจู:
- **ุงููุฑุงุกุฉ:** ูุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู
- **ุงููุชุงุจุฉ:** ูููุฏุฑุณูู ููุท

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /exams/{examId} {
      // ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ูุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู
      allow read: if request.auth != null;
      
      // ุงูุณูุงุญ ุจุงููุชุงุจุฉ ูููุฏุฑุณูู ููุท
      allow write: if request.auth != null && 
                      get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'teacher';
    }
  }
}
```

---

## ๐ ุฅุญุตุงุฆูุงุช ูููุฏุฉ

### ุญุณุงุจ ุนุฏุฏ ุงูุฃุณุฆูุฉ ูู ุงูุชุญุงู
```javascript
const questionCount = exam.questions?.length || 0;
```

### ุญุณุงุจ ูุณุจุฉ ุงููุฌุงุญ
```javascript
const percentage = Math.round((correctAnswers / totalQuestions) * 100);
```

### ุชุตููู ุงููุชูุฌุฉ
```javascript
let grade;
if (percentage >= 90) grade = 'ููุชุงุฒ';
else if (percentage >= 70) grade = 'ุฌูุฏ';
else if (percentage >= 50) grade = 'ููุจูู';
else grade = 'ุถุนูู';
```

---

## ๐จ ุนุฑุถ ุงูุจูุงูุงุช ูู ุงููุงุฌูุฉ

### ุนุฑุถ ููุน ุงูุงูุชุญุงู
```javascript
const examTypeLabel = exam.examType === 'internal' 
  ? '๐ ุงูุชุญุงู ูุฏูุฌ' 
  : '๐ ุงูุชุญุงู ุฎุงุฑุฌู';

const examTypeColor = exam.examType === 'internal' 
  ? '#10b981' // ุฃุฎุถุฑ
  : '#3b82f6'; // ุฃุฒุฑู
```

### ุนุฑุถ ูุนูููุงุช ุงูุงูุชุญุงู
```javascript
const examInfo = `
  ุงูุนููุงู: ${exam.title}
  ุงููุฏุฉ: ${exam.duration} ุฏูููุฉ
  ุงูููุน: ${examTypeLabel}
  ${exam.examType === 'internal' ? `ุนุฏุฏ ุงูุฃุณุฆูุฉ: ${exam.questions.length}` : ''}
`;
```

---

**ูุฐุง ุงููููู ูุถูู:**
- โ ุชูุธูู ูุงุถุญ ููุจูุงูุงุช
- โ ุณูููุฉ ุงูุงุณุชุนูุงู ูุงูุชุตููุฉ
- โ ุฏุนู ููุง ุงูููุนูู ูู ุงูุงูุชุญุงูุงุช
- โ ูุฑููุฉ ูู ุฅุถุงูุฉ ููุฒุงุช ูุณุชูุจููุฉ
- โ ุฃูุงู ุงูุจูุงูุงุช

**ุชู ุงูุชูุซูู ุจูุฌุงุญ! ๐**
