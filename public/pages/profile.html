<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>ط§ظ„ظ…ظ„ظپ ط§ظ„ط´ط®طµظٹ | ظ…ظ†طµط© ط§ظ„ظپظٹظ„ط³ظˆظپ ط§ظ„طھط¹ظ„ظٹظ…ظٹط©</title>
    <meta name="description" content="ظ…ظ„ظپظƒ ط§ظ„ط´ط®طµظٹ - طھط§ط¨ط¹ طھظ‚ط¯ظ…ظƒ ظˆظ…ظ‡ط§ظ…ظƒ">
    <meta name="robots" content="noindex, nofollow">
    
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/pages_style/profile.css">
    <style>
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            z-index: 1;
            pointer-events: none;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="%233b82f6" fill-opacity="0.05"/></svg>') repeat-x;
            animation: wave 15s linear infinite;
        }

        .wave:nth-child(2) {
            bottom: 10px;
            opacity: 0.5;
            animation: wave 20s linear infinite reverse;
        }

        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .header,
        .profile-container {
            position: relative;
            z-index: 10;
        }

        /* Enhanced Profile Styles */
        .profile-card {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .profile-avatar {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .profile-section {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .progress-card {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .progress-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
        }

        .progress-fill {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease;
        }

        .todo-item {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .todo-item:hover {
            border-color: #3b82f6;
            transform: translateX(-4px);
        }

        .todo-item.completed {
            opacity: 0.6;
            background: rgba(15, 23, 42, 0.4);
        }

        .todo-item.completed .todo-title {
            text-decoration: line-through;
        }

        .filter-btn, .tab-btn {
            padding: 0.5rem 1rem;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .tab-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
            color: #f1f5f9;
        }

        .filter-btn.active, .tab-btn.active {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-color: #3b82f6;
            color: white;
        }

        .todo-filters, .incomplete-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .incomplete-content {
            display: none;
        }

        .incomplete-content.active {
            display: block;
        }
    </style>
</head>
<body class="profile-page">
    <canvas id="three-canvas"></canvas>
    <div class="waves">
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <a href="#main-content" class="sr-only">طھط®ط·ظ‰ ط¥ظ„ظ‰ ط§ظ„ظ…ط­طھظˆظ‰ ط§ظ„ط±ط¦ظٹط³ظٹ</a>
    
    <header class="header" role="banner" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="ط§ظ„ظ‚ط§ط¦ظ…ط© ط§ظ„ط±ط¦ظٹط³ظٹط©">
                <div class="navbar-brand">
                    <a href="/" class="logo" aria-label="ط§ظ„طµظپط­ط© ط§ظ„ط±ط¦ظٹط³ظٹط©">
                        <span class="logo-icon" aria-hidden="true">ًںژ“</span>
                        <span class="logo-text">ظ…ظ†طµط© ط§ظ„ظپظٹظ„ط³ظˆظپ</span>
                    </a>
                </div>
                
                <div class="navbar-menu">
                    <ul class="navbar-nav" role="list">
                        <li><a href="/">ط§ظ„ط±ط¦ظٹط³ظٹط©</a></li>
                        <li><a href="videos.html">ط§ظ„ظپظٹط¯ظٹظˆظ‡ط§طھ</a></li>
                        <li><a href="exams.html">ط§ظ„ط§ظ…طھط­ط§ظ†ط§طھ</a></li>
                        <li><a href="notes.html">ط§ظ„ظ…ظ„ط§ط­ط¸ط§طھ</a></li>
                        <li><a href="profile.html" aria-current="page">ط§ظ„ظ…ظ„ظپ ط§ظ„ط´ط®طµظٹ</a></li>
                    </ul>
                    <button id="logoutBtn" class="btn btn-secondary">طھط³ط¬ظٹظ„ ط§ظ„ط®ط±ظˆط¬</button>
                </div>
            </nav>
        </div>
    </header>

    <main id="main-content" class="profile-container" role="main" style="padding-top: 100px; min-height: calc(100vh - 200px);">
        <div class="container">
            <div class="profile-layout">
                <aside class="profile-sidebar">
                    <div class="profile-card glass-card fade-in">
                        <div class="profile-avatar float-animation" aria-hidden="true">
                            <span id="userAvatar">ًں‘¤</span>
                        </div>
                        <h1 id="userName" class="profile-name"></h1>
                        <p id="userEmail" class="profile-email"></p>
                        <div class="profile-stats">
                            <div class="profile-stat">
                                <span class="stat-value" id="completedVideos">0</span>
                                <span class="stat-label">ظپظٹط¯ظٹظˆ ظ…ظƒطھظ…ظ„</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-value" id="completedExams">0</span>
                                <span class="stat-label">ط§ظ…طھط­ط§ظ† ظ…ظƒطھظ…ظ„</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <div class="profile-content">
                    <section class="profile-section slide-in" aria-labelledby="progress-title">
                        <h2 id="progress-title" class="section-title">طھظ‚ط¯ظ…ظƒ ط§ظ„طھط¹ظ„ظٹظ…ظٹ</h2>
                        
                        <div class="progress-cards">
                            <article class="progress-card hover-lift">
                                <div class="progress-header">
                                    <h3>ط§ظ„ظپظٹط¯ظٹظˆظ‡ط§طھ</h3>
                                    <span id="videoProgress" class="progress-percentage">0%</span>
                                </div>
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                    <div id="videoProgressBar" class="progress-fill"></div>
                                </div>
                                <p class="progress-text">
                                    <span id="watchedVideos">0</span> ظ…ظ† <span id="totalVideosCount">0</span> ظپظٹط¯ظٹظˆ
                                </p>
                            </article>

                            <article class="progress-card hover-lift">
                                <div class="progress-header">
                                    <h3>ط§ظ„ط§ظ…طھط­ط§ظ†ط§طھ</h3>
                                    <span id="examProgress" class="progress-percentage">0%</span>
                                </div>
                                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                    <div id="examProgressBar" class="progress-fill"></div>
                                </div>
                                <p class="progress-text">
                                    <span id="passedExams">0</span> ظ…ظ† <span id="totalExamsCount">0</span> ط§ظ…طھط­ط§ظ†
                                </p>
                            </article>
                        </div>
                    </section>

                    <section class="profile-section" aria-labelledby="todo-title">
                        <div class="section-header">
                            <h2 id="todo-title" class="section-title">ظ‚ط§ط¦ظ…ط© ط§ظ„ظ…ظ‡ط§ظ…</h2>
                            <button class="btn btn-primary btn-sm" id="addTodoBtn">
                                <span aria-hidden="true">â‍•</span> ط¥ط¶ط§ظپط© ظ…ظ‡ظ…ط©
                            </button>
                        </div>

                        <div class="todo-filters">
                            <button class="filter-btn active" data-filter="all">ط§ظ„ظƒظ„</button>
                            <button class="filter-btn" data-filter="pending">ظ‚ظٹط¯ ط§ظ„ط¥ظ†ط¬ط§ط²</button>
                            <button class="filter-btn" data-filter="completed">ظ…ظƒطھظ…ظ„ط©</button>
                        </div>

                        <div id="todoList" class="todo-list"></div>
                    </section>

                    <section class="profile-section" aria-labelledby="incomplete-title">
                        <h2 id="incomplete-title" class="section-title">ط§ظ„ظ…ط­طھظˆظ‰ ط؛ظٹط± ط§ظ„ظ…ظƒطھظ…ظ„</h2>
                        
                        <div class="incomplete-tabs">
                            <button class="tab-btn active" data-tab="videos">ط§ظ„ظپظٹط¯ظٹظˆظ‡ط§طھ</button>
                            <button class="tab-btn" data-tab="exams">ط§ظ„ط§ظ…طھط­ط§ظ†ط§طھ</button>
                        </div>

                        <div id="incompleteVideos" class="incomplete-content active"></div>
                        <div id="incompleteExams" class="incomplete-content"></div>
                    </section>

                    <section class="profile-section" aria-labelledby="results-title">
                        <h2 id="results-title" class="section-title">ظ†طھط§ط¦ط¬ ط§ظ„ط§ظ…طھط­ط§ظ†ط§طھ</h2>
                        <div id="examResults" class="results-list"></div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <div id="modalContainer"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Three.js Scene - Philosophy Brain Model
        const canvas = document.getElementById('three-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        camera.position.z = 5;

        // Create Brain
        const brainGeometry = new THREE.IcosahedronGeometry(0.8, 1);
        const brainMaterial = new THREE.MeshNormalMaterial({ wireframe: true, opacity: 0.3, transparent: true });
        const brain = new THREE.Mesh(brainGeometry, brainMaterial);
        scene.add(brain);

        // Create Logic Symbols
        const symbolGeometry = new THREE.OctahedronGeometry(0.25);
        const symbolMaterial = new THREE.MeshNormalMaterial({ wireframe: false, opacity: 0.4, transparent: true });
        
        const symbols = [];
        for (let i = 0; i < 6; i++) {
            const symbol = new THREE.Mesh(symbolGeometry, symbolMaterial);
            const angle = (i / 6) * Math.PI * 2;
            symbol.position.x = Math.cos(angle) * 2;
            symbol.position.y = Math.sin(angle) * 2;
            symbols.push(symbol);
            scene.add(symbol);
        }

        // Create Particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 500;
        const posArray = new Float32Array(particlesCount * 3);

        for (let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({ size: 0.02, color: 0x3b82f6, opacity: 0.6, transparent: true });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        // Animation
        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;
            
            brain.rotation.x += 0.005;
            brain.rotation.y += 0.005;
            
            symbols.forEach((symbol, i) => {
                const angle = (i / 6) * Math.PI * 2 + time * 0.3;
                symbol.position.x = Math.cos(angle) * 2;
                symbol.position.y = Math.sin(angle) * 2;
                symbol.rotation.x += 0.02;
                symbol.rotation.y += 0.02;
            });
            
            particlesMesh.rotation.y += 0.0005;
            renderer.render(scene, camera);
        }

        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Profile Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Get current user email from localStorage or session
            const currentUserEmail = localStorage.getItem('currentUserEmail') || 'student@example.com';
            
            // Load global data
            const videos = JSON.parse(localStorage.getItem('videos') || '[]');
            const exams = JSON.parse(localStorage.getItem('exams') || '[]');
            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            
            // Load user-specific progress
            const userProgress = JSON.parse(localStorage.getItem(`userProgress_${currentUserEmail}`) || '{"watchedVideos": [], "completedExams": [], "examScores": {}}');
            
            // Save user progress
            function saveUserProgress() {
                localStorage.setItem(`userProgress_${currentUserEmail}`, JSON.stringify(userProgress));
            }
            
            // Calculate statistics
            const watchedVideosCount = userProgress.watchedVideos.length;
            const totalVideosCount = videos.length;
            const videoProgress = totalVideosCount > 0 ? Math.round((watchedVideosCount / totalVideosCount) * 100) : 0;
            
            const completedExamsCount = userProgress.completedExams.length;
            const totalExamsCount = exams.length;
            const examProgress = totalExamsCount > 0 ? Math.round((completedExamsCount / totalExamsCount) * 100) : 0;
            
            // Sample data for todos
            let todos = JSON.parse(localStorage.getItem(`todos_${currentUserEmail}`) || '[]');
            
            // Initialize with sample todos if empty
            if (todos.length === 0) {
                todos = [
                    { id: 1, title: 'ظ…ط´ط§ظ‡ط¯ط© ظپظٹط¯ظٹظˆ ط§ظ„ط¯ط±ط³ ط§ظ„ط£ظˆظ„', completed: false, priority: 'high' },
                    { id: 2, title: 'ط­ظ„ ط§ظ„ط§ظ…طھط­ط§ظ† ط§ظ„طھط¬ط±ظٹط¨ظٹ', completed: false, priority: 'medium' },
                    { id: 3, title: 'ظ…ط±ط§ط¬ط¹ط© ط§ظ„ظ…ظ„ط§ط­ط¸ط§طھ', completed: true, priority: 'low' }
                ];
                localStorage.setItem(`todos_${currentUserEmail}`, JSON.stringify(todos));
            }
            
            function saveTodos() {
                localStorage.setItem(`todos_${currentUserEmail}`, JSON.stringify(todos));
            }

            // Load user info
            const userName = currentUserEmail.split('@')[0];
            document.getElementById('userName').textContent = userName;
            document.getElementById('userEmail').textContent = currentUserEmail;
            document.getElementById('completedVideos').textContent = watchedVideosCount;
            document.getElementById('completedExams').textContent = completedExamsCount;
            
            // Progress bars
            document.getElementById('videoProgress').textContent = videoProgress + '%';
            document.getElementById('videoProgressBar').style.width = videoProgress + '%';
            document.getElementById('watchedVideos').textContent = watchedVideosCount;
            document.getElementById('totalVideosCount').textContent = totalVideosCount;
            
            document.getElementById('examProgress').textContent = examProgress + '%';
            document.getElementById('examProgressBar').style.width = examProgress + '%';
            document.getElementById('passedExams').textContent = completedExamsCount;
            document.getElementById('totalExamsCount').textContent = totalExamsCount;

            // Modal Functions
            function createConfirmModal(title, message, onConfirm) {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay active';
                modal.style.cssText = 'display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; align-items: center; justify-content: center;';
                modal.innerHTML = `
                    <div style="background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); animation: modalSlideIn 0.3s ease;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h2 style="font-size: 1.5rem; color: #f1f5f9;">${title}</h2>
                            <button class="modal-close" style="background: none; border: none; color: #94a3b8; font-size: 1.5rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: all 0.3s ease;">âœ•</button>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                            <p style="color: #f1f5f9; font-size: 1.1rem;">${message}</p>
                        </div>
                        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                            <button class="modal-cancel" style="padding: 0.75rem 1.5rem; background: rgba(148, 163, 184, 0.2); color: #94a3b8; border: 1px solid rgba(148, 163, 184, 0.3); border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">ط¥ظ„ط؛ط§ط،</button>
                            <button class="modal-confirm" style="padding: 0.75rem 1.5rem; background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">طھط£ظƒظٹط¯</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                const closeBtn = modal.querySelector('.modal-close');
                const cancelBtn = modal.querySelector('.modal-cancel');
                const confirmBtn = modal.querySelector('.modal-confirm');
                
                function closeModal() {
                    modal.style.display = 'none';
                    setTimeout(() => modal.remove(), 300);
                }
                
                closeBtn.addEventListener('click', closeModal);
                cancelBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal();
                });
                
                confirmBtn.addEventListener('click', () => {
                    onConfirm();
                    closeModal();
                });
            }

            function showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.style.cssText = `position: fixed; bottom: 2rem; right: 2rem; background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(20px); border: 1px solid ${type === 'success' ? 'rgba(16, 185, 129, 0.5)' : 'rgba(239, 68, 68, 0.5)'}; border-radius: 12px; padding: 1rem 1.5rem; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); z-index: 2000; color: #f1f5f9; animation: toastSlideIn 0.3s ease;`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            // Logout Button
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    createConfirmModal(
                        'طھط³ط¬ظٹظ„ ط§ظ„ط®ط±ظˆط¬',
                        'ظ‡ظ„ ط£ظ†طھ ظ…طھط£ظƒط¯ ظ…ظ† طھط³ط¬ظٹظ„ ط§ظ„ط®ط±ظˆط¬طں',
                        () => {
                            showToast('طھظ… طھط³ط¬ظٹظ„ ط§ظ„ط®ط±ظˆط¬ ط¨ظ†ط¬ط§ط­!', 'success');
                            setTimeout(() => {
                                window.location.href = 'login.html';
                            }, 1000);
                        }
                    );
                });
            }

            // Add Todo Button
            const addTodoBtn = document.getElementById('addTodoBtn');
            if (addTodoBtn) {
                addTodoBtn.addEventListener('click', function() {
                    const modal = document.createElement('div');
                    modal.className = 'modal-overlay active';
                    modal.style.cssText = 'display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; align-items: center; justify-content: center;';
                    modal.innerHTML = `
                        <div style="background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 20px; padding: 2rem; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                <h2 style="font-size: 1.5rem; color: #f1f5f9;">ط¥ط¶ط§ظپط© ظ…ظ‡ظ…ط© ط¬ط¯ظٹط¯ط©</h2>
                                <button class="modal-close" style="background: none; border: none; color: #94a3b8; font-size: 1.5rem; cursor: pointer; padding: 0.5rem; border-radius: 8px;">âœ•</button>
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block;  color: #f1f5f9; font-weight: 500;">ط¹ظ†ظˆط§ظ† ط§ظ„ظ…ظ‡ظ…ط©</label>
                                    <input type="text" id="todoTitleInput" style="width: 100%; padding: 1rem; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(59, 130, 246, 0.2); border-radius: 12px; color: #f1f5f9; font-size: 1rem; box-sizing: border-box;">
                                </div>
                                <div>
                                    <label style="display: block;  color: #f1f5f9; font-weight: 500;">ط§ظ„ط£ظˆظ„ظˆظٹط©</label>
                                    <select id="todoPriorityInput" style="width: 100%; padding: 1rem; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(59, 130, 246, 0.2); border-radius: 12px; color: #f1f5f9; font-size: 1rem; box-sizing: border-box;">
                                        <option value="low">ظ…ظ†ط®ظپط¶ط©</option>
                                        <option value="medium" selected>ظ…طھظˆط³ط·ط©</option>
                                        <option value="high">ط¹ط§ظ„ظٹط©</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                <button class="modal-cancel" style="padding: 0.75rem 1.5rem; background: rgba(148, 163, 184, 0.2); color: #94a3b8; border: 1px solid rgba(148, 163, 184, 0.3); border-radius: 12px; font-weight: 600; cursor: pointer;">ط¥ظ„ط؛ط§ط،</button>
                                <button class="modal-submit" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer;">ط­ظپط¸</button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                    
                    const closeBtn = modal.querySelector('.modal-close');
                    const cancelBtn = modal.querySelector('.modal-cancel');
                    const submitBtn = modal.querySelector('.modal-submit');
                    const titleInput = modal.querySelector('#todoTitleInput');
                    const priorityInput = modal.querySelector('#todoPriorityInput');
                    
                    function closeModal() {
                        modal.style.display = 'none';
                        setTimeout(() => modal.remove(), 300);
                    }
                    
                    closeBtn.addEventListener('click', closeModal);
                    cancelBtn.addEventListener('click', closeModal);
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) closeModal();
                    });
                    
                    submitBtn.addEventListener('click', () => {
                        const title = titleInput.value.trim();
                        const priority = priorityInput.value;
                        
                        if (!title) {
                            showToast('ظٹط±ط¬ظ‰ ط¥ط¯ط®ط§ظ„ ط¹ظ†ظˆط§ظ† ط§ظ„ظ…ظ‡ظ…ط©', 'error');
                            return;
                        }
                        
                        const newTodo = {
                            id: Date.now(),
                            title: title,
                            completed: false,
                            priority: priority
                        };
                        todos.push(newTodo);
                        saveTodos();
                        renderTodos();
                        showToast('طھظ… ط¥ط¶ط§ظپط© ط§ظ„ظ…ظ‡ظ…ط© ط¨ظ†ط¬ط§ط­!', 'success');
                        closeModal();
                    });
                    
                    titleInput.focus();
                });
            }

            // Render Todos
            function renderTodos() {
                const todoList = document.getElementById('todoList');
                if (!todoList) return;

                if (todos.length === 0) {
                    todoList.innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 2rem;">ظ„ط§ طھظˆط¬ط¯ ظ…ظ‡ط§ظ… ط­ط§ظ„ظٹط§ظ‹</p>';
                    return;
                }

                todoList.innerHTML = todos.map(todo => `
                    <div class="todo-item ${todo.completed ? 'completed' : ''}" data-id="${todo.id}">
                        <div class="todo-content">
                            <div class="todo-title">${todo.title}</div>
                            <div class="todo-meta">
                                <span class="todo-priority ${todo.priority}">${
                                    todo.priority === 'high' ? 'ط¹ط§ظ„ظٹط©' : 
                                    todo.priority === 'medium' ? 'ظ…طھظˆط³ط·ط©' : 'ظ…ظ†ط®ظپط¶ط©'
                                }</span>
                            </div>
                        </div>
                        <div class="todo-actions">
                            <button class="btn btn-sm ${todo.completed ? 'btn-secondary' : 'btn-success'}" onclick="toggleTodo(${todo.id})">
                                ${todo.completed ? 'â†©ï¸ڈ' : 'âœ“'}
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteTodo(${todo.id})">ًں—‘ï¸ڈ</button>
                        </div>
                    </div>
                `).join('');
            }

            // Toggle Todo
            window.toggleTodo = function(id) {
                const todo = todos.find(t => t.id === id);
                if (todo) {
                    todo.completed = !todo.completed;
                    saveTodos();
                    renderTodos();
                }
            };

            // Delete Todo
            window.deleteTodo = function(id) {
                createConfirmModal(
                    'ط­ط°ظپ ط§ظ„ظ…ظ‡ظ…ط©',
                    'ظ‡ظ„ ط£ظ†طھ ظ…طھط£ظƒط¯ ظ…ظ† ط­ط°ظپ ظ‡ط°ظ‡ ط§ظ„ظ…ظ‡ظ…ط©طں',
                    () => {
                        todos = todos.filter(t => t.id !== id);
                        saveTodos();
                        renderTodos();
                        showToast('طھظ… ط­ط°ظپ ط§ظ„ظ…ظ‡ظ…ط© ط¨ظ†ط¬ط§ط­!', 'success');
                    }
                );
            };

            // Filter Todos
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    const todoItems = document.querySelectorAll('.todo-item');
                    
                    todoItems.forEach(item => {
                        if (filter === 'all') {
                            item.style.display = 'flex';
                        } else if (filter === 'completed') {
                            item.style.display = item.classList.contains('completed') ? 'flex' : 'none';
                        } else if (filter === 'pending') {
                            item.style.display = !item.classList.contains('completed') ? 'flex' : 'none';
                        }
                    });
                });
            });

            // Initial render
            renderTodos();

            // Tab switching
            const tabBtns = document.querySelectorAll('.tab-btn');
            const incompleteContents = document.querySelectorAll('.incomplete-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const tab = this.getAttribute('data-tab');
                    incompleteContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `incomplete${tab.charAt(0).toUpperCase() + tab.slice(1)}`) {
                            content.classList.add('active');
                        }
                    });
                });
            });

            // Load incomplete content
            const incompleteVideos = videos.filter(v => !userProgress.watchedVideos.includes(v.id));
            const incompleteExams = exams.filter(e => !userProgress.completedExams.includes(e.id));
            
            if (incompleteVideos.length > 0) {
                document.getElementById('incompleteVideos').innerHTML = incompleteVideos.map(video => `
                    <div style="background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 1rem; margin-bottom: 1rem;">
                        <h4 style="color: #f1f5f9; ">${video.title}</h4>
                        <p style="color: #94a3b8; font-size: 0.875rem;">${video.description || 'ظ„ط§ ظٹظˆط¬ط¯ ظˆطµظپ'}</p>
                        <a href="videos.html" style="color: #3b82f6; font-size: 0.875rem; margin-top: 0.5rem; display: inline-block;">ظ…ط´ط§ظ‡ط¯ط© ط§ظ„ط¢ظ† â†’</a>
                    </div>
                `).join('');
            } else {
                document.getElementById('incompleteVideos').innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 2rem;">ط£ط­ط³ظ†طھ! ط´ط§ظ‡ط¯طھ ط¬ظ…ظٹط¹ ط§ظ„ظپظٹط¯ظٹظˆظ‡ط§طھ ًںژ‰</p>';
            }
            
            if (incompleteExams.length > 0) {
                document.getElementById('incompleteExams').innerHTML = incompleteExams.map(exam => `
                    <div style="background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 1rem; margin-bottom: 1rem;">
                        <h4 style="color: #f1f5f9; ">${exam.title}</h4>
                        <p style="color: #94a3b8; font-size: 0.875rem;">${exam.description || 'ظ„ط§ ظٹظˆط¬ط¯ ظˆطµظپ'}</p>
                        <a href="exams.html" style="color: #3b82f6; font-size: 0.875rem; margin-top: 0.5rem; display: inline-block;">ط§ط¨ط¯ط£ ط§ظ„ط§ظ…طھط­ط§ظ† â†’</a>
                    </div>
                `).join('');
            } else {
                document.getElementById('incompleteExams').innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 2rem;">ط£ط­ط³ظ†طھ! ط£ظƒظ…ظ„طھ ط¬ظ…ظٹط¹ ط§ظ„ط§ظ…طھط­ط§ظ†ط§طھ ًںژ‰</p>';
            }
            
            // Exam results
            const examResults = Object.entries(userProgress.examScores || {}).map(([examId, score]) => {
                const exam = exams.find(e => e.id == examId);
                return exam ? { exam, score } : null;
            }).filter(Boolean);
            
            if (examResults.length > 0) {
                document.getElementById('examResults').innerHTML = examResults.map(result => `
                    <div style="background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 1rem; margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="color: #f1f5f9; ">${result.exam.title}</h4>
                            <p style="color: #94a3b8; font-size: 0.875rem;">ط§ظ„ط¯ط±ط¬ط©: ${result.score}/${result.exam.totalScore || 100}</p>
                        </div>
                        <div style="font-size: 2rem;">${result.score >= (result.exam.totalScore || 100) * 0.6 ? 'âœ…' : 'â‌Œ'}</div>
                    </div>
                `).join('');
            } else {
                document.getElementById('examResults').innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 2rem;">ظ„ط§ طھظˆط¬ط¯ ظ†طھط§ط¦ط¬ ط­ط§ظ„ظٹط§ظ‹</p>';
            }
        });
    </script>

    <div class="waves" style="position: fixed; bottom: 0; left: 0; width: 100%; height: 120px; z-index: 1; pointer-events: none;">
        <div class="wave" style="position: absolute; bottom: 0; left: 0; width: 200%; height: 100%; background: url('data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 1200 120&quot; preserveAspectRatio=&quot;none&quot;><path d=&quot;M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z&quot; fill=&quot;%231e293b&quot; fill-opacity=&quot;0.9&quot;/></svg>') repeat-x; animation: wave 25s linear infinite;"></div>
        <div class="wave" style="position: absolute; bottom: 10px; left: 0; width: 200%; height: 100%; background: url('data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 1200 120&quot; preserveAspectRatio=&quot;none&quot;><path d=&quot;M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z&quot; fill=&quot;%233b82f6&quot; fill-opacity=&quot;0.9&quot;/></svg>') repeat-x; animation: wave 35s linear infinite reverse;"></div>
        <div class="wave" style="position: absolute; bottom: 20px; left: 0; width: 200%; height: 100%; background: url('data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 1200 120&quot; preserveAspectRatio=&quot;none&quot;><path d=&quot;M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z&quot; fill=&quot;%238b5cf6&quot; fill-opacity=&quot;0.9&quot;/></svg>') repeat-x; animation: wave 45s linear infinite;"></div>
    </div>

    <footer class="footer" role="contentinfo" style="position: relative; z-index: 10; background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); border-top: 2px solid rgba(59, 130, 246, 0.3); padding: 2.5rem 0; margin-top: 4rem; height: 240px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <div class="container" style="max-width: 900px;">
            <!-- Platform Title -->
            <div style="text-align: center; margin-bottom: 2.5rem;">
                <div style="display: inline-flex; align-items: center; gap: 1rem; ">
                    <span style="font-size: 1.75rem; filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.5));" aria-hidden="true">ًںژ“</span>
                    <h3 style="color: #3b82f6; font-size: 1.35rem; font-weight: 700; margin: 0; text-shadow: 0 0 20px rgba(59, 130, 246, 0.3);">ظ…ظ†طµط© ط§ظ„ظپظٹظ„ط³ظˆظپ ط§ظ„طھط¹ظ„ظٹظ…ظٹط©</h3>
                </div>
                <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">
                    ط±ط­ظ„طھظƒ ط§ظ„طھط¹ظ„ظٹظ…ظٹط© طھط¨ط¯ط£ ظ‡ظ†ط§ ظ…ط¹ ط§ظ„ط£ط³طھط§ط° ظ…ط­ظ…ط¯ ظ†ط§طµط±
                </p>
            </div>

            <!-- Social Icons -->
            <div style="text-align: center; margin-bottom: 1.75rem;">
                <div style="display: inline-flex; gap: 1rem; align-items: center;">
                    <a href="https://www.linkedin.com/in/nour-ibrahem-499172346/" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; width: 48px; height: 48px; background: rgba(59, 130, 246, 0.15); border: 2px solid rgba(59, 130, 246, 0.3); border-radius: 50%; color: #3b82f6; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(10px);" title="LinkedIn" onmouseover="this.style.background='rgba(59, 130, 246, 0.25)'; this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 10px 25px rgba(59, 130, 246, 0.4)'" onmouseout="this.style.background='rgba(59, 130, 246, 0.15)'; this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='none'">
                        <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                        </svg>
                    </a>
                    <a href="mailto:nouribrahem207@gmail.com" style="display: inline-flex; align-items: center; justify-content: center; width: 48px; height: 48px; background: rgba(239, 68, 68, 0.15); border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 50%; color: #ef4444; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(10px);" title="Gmail" onmouseover="this.style.background='rgba(239, 68, 68, 0.25)'; this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 10px 25px rgba(239, 68, 68, 0.4)'" onmouseout="this.style.background='rgba(239, 68, 68, 0.15)'; this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='none'">
                        <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Developer Info & Copyright -->
            <div style="text-align: center; padding-top: 1.75rem; border-top: 1px solid rgba(59, 130, 246, 0.2);">
                <p style="color: #64748b; font-size: 0.85rem; margin: 0 0 0.4rem 0;">
                    طھظ… ط§ظ„طھط·ظˆظٹط± ط¨ظˆط§ط³ط·ط© <span style="color: #3b82f6; font-weight: 600;">Nour Ibrahem</span>
                </p>
                <p style="color: #475569; font-size: 0.75rem; margin: 0;">
                    آ© 2024 ظ…ظ†طµط© ط§ظ„ظپظٹظ„ط³ظˆظپ ط§ظ„طھط¹ظ„ظٹظ…ظٹط© - ط¬ظ…ظٹط¹ ط§ظ„ط­ظ‚ظˆظ‚ ظ…ط­ظپظˆط¸ط©
                </p>
            </div>
        </div>
    </footer>

    <style>
        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
    </style>

    <!-- Back to Top Button -->
    <button id="backToTop" style="position: fixed; bottom: 2rem; right: 2rem; width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); border: none; border-radius: 50%; color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4); z-index: 999; display: none; transition: all 0.3s ease;" title="ط§ظ„ط¹ظˆط¯ط© ظ„ظ„ط£ط¹ظ„ظ‰" aria-label="ط§ظ„ط¹ظˆط¯ط© ظ„ظ„ط£ط¹ظ„ظ‰">
        â†‘
    </button>

    <script>
        // Back to Top Button
        const backToTopBtn = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });
        
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        backToTopBtn.addEventListener('mouseenter', () => {
            backToTopBtn.style.transform = 'scale(1.1)';
            backToTopBtn.style.boxShadow = '0 6px 30px rgba(59, 130, 246, 0.6)';
        });
        
        backToTopBtn.addEventListener('mouseleave', () => {
            backToTopBtn.style.transform = 'scale(1)';
            backToTopBtn.style.boxShadow = '0 4px 20px rgba(59, 130, 246, 0.4)';
        });
    </script>
    <script src="../assets/js/motivational-toast.js"></script>
</body>
</html>

